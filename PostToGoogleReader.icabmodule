//startconfig
//id=de.icab.PostToGoogleReader
//icon=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
//title=Post to Google Reader
//description=Saves the current page in your Google Reader account, so you can share it with the followers.
//var=confirmation;type=confirmation;default=false;
//var=username;type=string;title=Name;
//var=password;type=password;title=Password;title.de=Passwort;
//endconfig

if (username == "") {
    var text = "You have to configure your Google Reader account information (name, password) in the module settings to use this module!";
    alert(text);
} else {
    var doAction = (confirmation == false);

    if (confirmation) {
        var text = "Do you want to post this page to the Google Reader?";
        doAction = confirm(text);
    }

    function GoogleReaderResponse(status,data) {
        var text = "Error posting the page to Instapaper";
        if (status == 201) {
            text = "Posting the page to the Google Reader was successful.";
        } else if (status == 403) {
            text = "Error: Invalid username or password!";
        }
        alert(text);
    }

    if (doAction) {
        var b=document.body;
        var GR________bookmarklet_domain='http://www.google.com';

        if (b && !document.xmlVersion) {
            void(z=document.createElement('script'));
            void(z.src='http://www.google.com/reader/ui/link-bookmarklet.js');
            void(b.appendChild(z));
        } else {
          // do nothing
        }
    }
}

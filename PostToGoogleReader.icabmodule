//startconfig
//id=de.icab.PostToGoogleReader
//icon=iVBORw0KGgoAAAANSUhEUgAAACwAAAAkCAMAAADFCSheAAADAFBMVEUAAABDQ0NLS0tTU1NsT3E4ZqU7a7w6bMFDZapBa6VFb6hMdq5DcLBCcbpPeLBNebpXbqZWd6RTe7JDc8RFdMlJd8VNeslTfsw7umQ6wmlToVxUun5HwnBTy3xewH1YyX1eg7tbq5h6ip5mgaVnibh4iqJ8jLt6krJ+qKtVgMtfh8dbhcxYg9FgiMlljNJljthoj9JtkMRskMxrkdRrk9pzlMFzlsp6mcN7m8txldN1mdZ3m956nNZ7nt10muJ7n+F/r8J9oupgx4FkyoZk0Ylj2Yxr1ZBt25Nxwopwyo18xpR91pt42pp65aCfPDykOTW7RTq7SD2qRkKtS0esV1W7UEa9WVG/bmqxfWjBRTnDSDvIVkrDWlDNXVHLYFTMZFnPaF3AamPLbGLJcGnQb2TReG/SfHSNbYSUdouodoKAnXCRjmmVn3uelnrCgX3RhH3Yg3rYiH/mhXnhin+NjYyfgJOQkI+bm5qLhquIlKWLnbSfiKGWnqaapLG2hIK8l6CgoJ+np6alrba1pra4uLiFnsGHpMqMpMaFpNSCotuLqNSLqduRpcGbq8GRrd2dssyWsN6etdWDpeKCpeiLquKKq+mLrvKXsuWatOKZuPWlu9mjuuOivOuovuSov+mivvSDzJuIyZ2H0J6MyqCK0aGbxqmc1a6P5K2B8auW5LGe5beX9Lqo0rWu2bux2L2j5Lqzxd2tweS8zeq5zfW67MzMk4/SjIjajYbbkorXn5vdmJHYnZnbo5/Brq3PpKPBtbTZp6XYrKvft7bhnpf0oJTwqJ7ipqDjqqTorKbmsazosKnivLvoubTqvrnI0r/sxL/Dw8LIyMfMzMvLztHfzc3T09LX2Nfb1NLY2Nfb29vE0uXO2enF1fTG1/nN2vHS3fLK8djS59nW4fTc5fbX9OHa9OPlysnvycXuy8jy1tT14N3l5eXk7+jo6Ofs7Ovj6vXl7fzo7vns8fns+fD35uT06Oby6Oj68O/z8/Px9Pvy+/X3+f359PP9+Pf9/f0AAABjleEZAAABAHRSTlP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AU/cHJQAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuNtCDrVoAAAMOSURBVDhPY/hPAmAgQe1/WitmJAjArgU5g/nqjx///v2AwIdrly3xdJKRkHvz79+fb19///3999/ffz+uMkMVA9WCwbt1yxY5O7vISgKBhFTuzm3JMQFhz6CSVyGKGd9B1Xp5r9/y9POvz+dysiOSUhKiI0EgDCbLCFP8DgTWLH/yDwQOpR0++eLV1y8vz2wHqd8Klnz3A6YYwl24eiVI7Z9dJ8F6wOBsXGTAM4g0TPFbIPvt2wUr3Les8nHLOlqMUPzv347IRJD0u9dQxa8hYLGvu+uDX/8OHCk6cbq+NCMz/+QfkK7jkfvA0lDFNyFgqbe8++d/P5urK9SMjLTZ2QT2xB8Dqd4Veh0kjar4qoe0okOHkbGBuDA7GEz8uyMNpDopD0nxtZs3b9y8ceOmhpnVhLmb7t+/t2mCHkgx7/t/uwqAil8GguShJl+FgMtdMxA++zgdaLzFv38pZ//9OZ8KkkZV3DtnCnIwfLRkZ7v973lswfbdz5AUX4KA1pl2j4GqP374BNUzgV3r1Pb88CD/gyBpqMlQxe3THG1nmOjo6WmKdd4Hq+9jSw/y9/cP3oek+OKFSxcuXrzQM9VEf8ZHkKJPGzVtfoIYlhx+QMUhe0EKoCZfgICmTm3jOTBXd2uDHPNJmCWkbj9EGlXxBXNdbXu4F2fogphz2VqgRsEUt4DBhZYqC37bzY/v3Qe74J9lN5D4LVoFkW1pgZoMVHcBzDfl13WcPGeO/RSQ8vcijx/N7txYCzIGhGCKYZrVDbkngXx4zxqkWk/cZlbbLaBiVJNh/FpTVq3NICfcm/JoXme3OTcr64YmNMWNMNCsosLa+QGo+I59t4UQKxAI9cMlYc5obGwBo8ZKU1aV+Xc3b95oClIJBIK1jU2NzWBJqGK45sZGFT6VWebmfBCVnMqVSFKYilVNuTfADEVWCdQEVVze0FDeWA4iG2o4Z4HdKqha3gjkAhGQAAKgPETx/3IQaADjBiUVPlZBJQgXIgJhlJdDSySmEpgAbrqECaoYWCgRBPCCkejynKTCHAClPCTCN0ewdgAAAABJRU5ErkJggg==
//title=Post to Google Reader
//description=Saves the current page in your Google Reader account, so you can share it with the followers.
//var=confirmation;type=confirmation;default=false;
//var=username;type=string;title=Name;
//var=password;type=password;title=Password;title.de=Passwort;
//endconfig

if (username == "") {
    var text = "You have to configure your Google Reader account information (name, password) in the module settings to use this module!";
    alert(text);
} else {
    var doAction = (confirmation == false);

    if (confirmation) {
        var text = "Do you want to post this page to the Google Reader?";
        doAction = confirm(text);
    }

    function GoogleReaderResponse(status,data) {
        var text = "Error posting the page to Instapaper";
        if (status == 201) {
            text = "Posting the page to the Google Reader was successful.";
        } else if (status == 403) {
            text = "Error: Invalid username or password!";
        }
        alert(text);
    }

    if (doAction) {
        var b=document.body;
        var GR________bookmarklet_domain='http://www.google.com';

        if (b && !document.xmlVersion) {
            void(z=document.createElement('script'));
            void(z.src='http://www.google.com/reader/ui/link-bookmarklet.js');
            void(b.appendChild(z));
        } else {
          // do nothing
        }
    }
}
